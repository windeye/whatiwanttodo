function getSlideEl(e){return 0>e||e>=slideEls.length?null:slideEls[e]}function updateSlideClass(e,t){var n=getSlideEl(e);if(n){t&&n.classList.add(t);for(var a in SLIDE_CLASSES)t!=SLIDE_CLASSES[a]&&n.classList.remove(SLIDE_CLASSES[a])}}function updateSlides(){for(var e=0;e<slideEls.length;e++)switch(e){case curSlide-2:updateSlideClass(e,"far-past");break;case curSlide-1:updateSlideClass(e,"past");break;case curSlide:updateSlideClass(e,"current");break;case curSlide+1:updateSlideClass(e,"next");break;case curSlide+2:updateSlideClass(e,"far-next");break;default:updateSlideClass(e)}triggerLeaveEvent(curSlide-1),triggerEnterEvent(curSlide),window.setTimeout(function(){disableSlideFrames(curSlide-2)},301),enableSlideFrames(curSlide-1),enableSlideFrames(curSlide+2),isChromeVoxActive()&&speakAndSyncToNode(slideEls[curSlide]),updateHash()}function buildNextItem(){var e=slideEls[curSlide].querySelectorAll(".to-build");return e.length?(e[0].classList.remove("to-build"),isChromeVoxActive()&&speakAndSyncToNode(e[0]),!0):!1}function prevSlide(){curSlide>0&&(curSlide--,updateSlides())}function nextSlide(){buildNextItem()||curSlide<slideEls.length-1&&(curSlide++,updateSlides())}function triggerEnterEvent(e){var t=getSlideEl(e);if(t){var n=t.getAttribute("onslideenter");n&&new Function(n).call(t);var a=document.createEvent("Event");a.initEvent("slideenter",!0,!0),a.slideNumber=e+1,t.dispatchEvent(a)}}function triggerLeaveEvent(e){var t=getSlideEl(e);if(t){var n=t.getAttribute("onslideleave");n&&new Function(n).call(t);var a=document.createEvent("Event");a.initEvent("slideleave",!0,!0),a.slideNumber=e+1,t.dispatchEvent(a)}}function handleTouchStart(e){1==e.touches.length&&(touchDX=0,touchDY=0,touchStartX=e.touches[0].pageX,touchStartY=e.touches[0].pageY,document.body.addEventListener("touchmove",handleTouchMove,!0),document.body.addEventListener("touchend",handleTouchEnd,!0))}function handleTouchMove(e){e.touches.length>1?cancelTouch():(touchDX=e.touches[0].pageX-touchStartX,touchDY=e.touches[0].pageY-touchStartY)}function handleTouchEnd(){var e=Math.abs(touchDX),t=Math.abs(touchDY);e>PM_TOUCH_SENSITIVITY&&2*e/3>t&&(touchDX>0?prevSlide():nextSlide()),cancelTouch()}function cancelTouch(){document.body.removeEventListener("touchmove",handleTouchMove,!0),document.body.removeEventListener("touchend",handleTouchEnd,!0)}function disableSlideFrames(e){var t=getSlideEl(e);if(t)for(var n,a=t.getElementsByTagName("iframe"),i=0;n=a[i];i++)disableFrame(n)}function enableSlideFrames(e){var t=getSlideEl(e);if(t)for(var n,a=t.getElementsByTagName("iframe"),i=0;n=a[i];i++)enableFrame(n)}function disableFrame(e){e.src="about:blank"}function enableFrame(e){var t=e._src;e.src!=t&&"about:blank"!=t&&(e.src=t)}function setupFrames(){for(var e,t=document.querySelectorAll("iframe"),n=0;e=t[n];n++)e._src=e.src,disableFrame(e);enableSlideFrames(curSlide),enableSlideFrames(curSlide+1),enableSlideFrames(curSlide+2)}function setupInteraction(){var e=document.createElement("div");e.className="slide-area",e.id="prev-slide-area",e.addEventListener("click",prevSlide,!1),document.querySelector("section.slides").appendChild(e);var e=document.createElement("div");e.className="slide-area",e.id="next-slide-area",e.addEventListener("click",nextSlide,!1),document.querySelector("section.slides").appendChild(e),document.body.addEventListener("touchstart",handleTouchStart,!1)}function isChromeVoxActive(){return"undefined"==typeof cvox?!1:!0}function speakAndSyncToNode(e){if(isChromeVoxActive()){cvox.ChromeVox.navigationManager.switchToStrategy(cvox.ChromeVoxNavigationManager.STRATEGIES.LINEARDOM,0,!0),cvox.ChromeVox.navigationManager.syncToNode(e),cvox.ChromeVoxUserCommands.finishNavCommand("");for(var t=e;t.firstChild;)t=t.firstChild;cvox.ChromeVox.navigationManager.syncToNode(t)}}function speakNextItem(){if(isChromeVoxActive()){if(cvox.ChromeVox.navigationManager.switchToStrategy(cvox.ChromeVoxNavigationManager.STRATEGIES.LINEARDOM,0,!0),cvox.ChromeVox.navigationManager.next(!0),!cvox.DomUtil.isDescendantOfNode(cvox.ChromeVox.navigationManager.getCurrentNode(),slideEls[curSlide])){for(var e=slideEls[curSlide];e.firstChild;)e=e.firstChild;cvox.ChromeVox.navigationManager.syncToNode(e),cvox.ChromeVox.navigationManager.next(!0)}cvox.ChromeVoxUserCommands.finishNavCommand("")}}function speakPrevItem(){if(isChromeVoxActive()){if(cvox.ChromeVox.navigationManager.switchToStrategy(cvox.ChromeVoxNavigationManager.STRATEGIES.LINEARDOM,0,!0),cvox.ChromeVox.navigationManager.previous(!0),!cvox.DomUtil.isDescendantOfNode(cvox.ChromeVox.navigationManager.getCurrentNode(),slideEls[curSlide])){for(var e=slideEls[curSlide];e.lastChild;)e=e.lastChild;cvox.ChromeVox.navigationManager.syncToNode(e),cvox.ChromeVox.navigationManager.previous(!0)}cvox.ChromeVoxUserCommands.finishNavCommand("")}}function getCurSlideFromHash(){var e=parseInt(location.hash.substr(1));curSlide=e?e-1:0}function updateHash(){location.replace("#"+(curSlide+1))}function handleBodyKeyDown(e){switch(e.keyCode){case 39:case 13:case 32:case 34:nextSlide(),e.preventDefault();break;case 37:case 8:case 33:prevSlide(),e.preventDefault();break;case 40:isChromeVoxActive()?speakNextItem():nextSlide(),e.preventDefault();break;case 38:isChromeVoxActive()?speakPrevItem():prevSlide(),e.preventDefault()}}function addEventListeners(){document.addEventListener("keydown",handleBodyKeyDown,!1)}function addPrettify(){for(var e,t=document.querySelectorAll("pre"),n=0;e=t[n];n++)e.classList.contains("noprettyprint")||e.classList.add("prettyprint");var e=document.createElement("script");e.type="text/javascript",e.src=PERMANENT_URL_PREFIX+"prettify.js",e.onload=function(){prettyPrint()},document.body.appendChild(e)}function addFontStyle(){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href="http://fonts.googleapis.com/css?family=Open+Sans:regular,semibold,italic,italicsemibold|Droid+Sans+Mono",document.body.appendChild(e)}function addGeneralStyle(){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=PERMANENT_URL_PREFIX+"styles.css",document.body.appendChild(e);var e=document.createElement("meta");e.name="viewport",e.content="width=1100,height=750",document.querySelector("head").appendChild(e);var e=document.createElement("meta");e.name="apple-mobile-web-app-capable",e.content="yes",document.querySelector("head").appendChild(e)}function makeBuildLists(){for(var e,t=curSlide;e=slideEls[t];t++)for(var n,a=e.querySelectorAll(".build > *"),i=0;n=a[i];i++)n.classList&&n.classList.add("to-build")}function handleDomLoaded(){slideEls=document.querySelectorAll("section.slides > article"),setupFrames(),addFontStyle(),addGeneralStyle(),addPrettify(),addEventListeners(),updateSlides(),setupInteraction(),makeBuildLists(),document.body.classList.add("loaded")}function initialize(){getCurSlideFromHash(),window._DEBUG&&(PERMANENT_URL_PREFIX="../"),window._DCL?handleDomLoaded():document.addEventListener("DOMContentLoaded",handleDomLoaded,!1)}!function(){jQuery(function(){return $("#comment-form").on("ajax:beforeSend",function(){return $(this).find("textarea").addClass("uneditable-input").attr("disabled","disabled")}).on("ajax:success",function(e,t,n,a){return $(this).find("textarea").removeClass("uneditable-input").removeAttr("disabled","disabled").val(""),$(a.responseText).hide().prependTo($("#all-comments")).show("slow")}).on("ajax:error",function(e,t){return $(this).find("textarea").removeClass("uneditable-input").removeAttr("disabled","disabled").val(""),$(this).parents("#post-comment").removeAttr("disabled","disabled"),401===t.status||400===t.status?($("#post-comment").popover({content:""+t.responseText}).popover("show"),setTimeout(function(){return $("#post-comment").popover("destroy")},3e3)):void 0}),$(document).on("ajax:beforeSend",".comment",function(){return $(this).fadeTo("fast",.5)}).on("ajax:success",".comment",function(){return $(this).hide("fast")}).on("ajax:error",".comment",function(){return $(this).fadeTo("fast",1)})})}.call(this),function(){$(document).ready(function(){return $("body").on("ajax:success","#interactions [data-remote]",function(e,t){return $(this).parents("#interactions").replaceWith(t)}),$("#interactions").on("ajax:error",function(e,t){return 401===t.status?($("#interactions a").popover({placement:"left",content:""+t.responseText}).popover("show"),setTimeout(function(){return $("#interactions a").popover("destroy")},3e3)):void 0})})}.call(this);var PERMANENT_URL_PREFIX="http://localhost:3000/assets/",SLIDE_CLASSES=["far-past","past","current","next","far-next"],PM_TOUCH_SENSITIVITY=15,curSlide;if("undefined"==typeof document||"classList"in document.createElement("a")||function(e){var t="classList",n="prototype",a=(e.HTMLElement||e.Element)[n],i=Object;if(strTrim=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},arrIndexOf=Array[n].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},DOMEx=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},checkTokenAndGetIndex=function(e,t){if(""===t)throw new DOMEx("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new DOMEx("INVALID_CHARACTER_ERR","String contains an invalid character");return arrIndexOf.call(e,t)},ClassList=function(e){for(var t=strTrim.call(e.className),n=t?t.split(/\s+/):[],a=0,i=n.length;i>a;a++)this.push(n[a]);this._updateClassName=function(){e.className=this.toString()}},classListProto=ClassList[n]=[],classListGetter=function(){return new ClassList(this)},DOMEx[n]=Error[n],classListProto.item=function(e){return this[e]||null},classListProto.contains=function(e){return e+="",-1!==checkTokenAndGetIndex(this,e)},classListProto.add=function(e){e+="",-1===checkTokenAndGetIndex(this,e)&&(this.push(e),this._updateClassName())},classListProto.remove=function(e){e+="";var t=checkTokenAndGetIndex(this,e);-1!==t&&(this.splice(t,1),this._updateClassName())},classListProto.toggle=function(e){e+="",-1===checkTokenAndGetIndex(this,e)?this.add(e):this.remove(e)},classListProto.toString=function(){return this.join(" ")},i.defineProperty){var o={get:classListGetter,enumerable:!0,configurable:!0};try{i.defineProperty(a,t,o)}catch(r){-2146823252===r.number&&(o.enumerable=!1,i.defineProperty(a,t,o))}}else i[n].__defineGetter__&&a.__defineGetter__(t,classListGetter)}(self),window._DEBUG||-1===document.location.href.indexOf("?debug"))initialize();else{document.addEventListener("DOMContentLoaded",function(){window._DCL=!0},!1),window._DEBUG=!0;var script=document.createElement("script");script.type="text/javascript",script.src="../slides.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(script,s),s.parentNode.removeChild(s)}